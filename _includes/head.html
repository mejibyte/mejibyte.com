<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  {%- seo -%}
  <link rel="stylesheet" href="{{ "/assets/main.css" | relative_url }}">
  {%- feed_meta -%}
  {%- if jekyll.environment == 'production' and site.google_analytics -%}
    {%- include google-analytics.html -%}
  {%- endif -%}

  {% if page.include_mathjax %}
    <script type="text/javascript">
      window.MathJax = {
        tex: {
          packages: ['base', 'ams']
        },
        loader: {
          load: ['ui/menu', '[tex]/ams']
        },
        options: {
          renderActions: {
            {% comment %}
            I had to add this findScript block to make this work with MathJax v3:
            https://11011110.github.io/blog/2019/10/17/mathjax-3-jekyll.html
            http://docs.mathjax.org/en/latest/upgrading/v2.html#changes-in-the-mathjax-api

            I believe this might not be necessary since this guy apparently was able to
            get it to work without it: https://quuxplusone.github.io/blog/2020/08/19/mathjax-v3-in-jekyll/

            Maybe I just need a newer version of Kramdown?
            https://github.com/gettalong/kramdown/issues/626
            {% endcomment %}
            findScript: [10, function (doc) {
              for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
                const display = !!node.type.match(/; *mode=display/);
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
                const text = document.createTextNode('');
                node.parentNode.replaceChild(text, node);
                math.start = {node: text, delim: '', n: 0};
                math.end = {node: text, delim: '', n: 0};
                doc.math.push(math);
              }
            }, '']
          }
  }
      };
    </script>
    <script type="text/javascript" id="MathJax-script" async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
    </script>
</script>
  {% endif %}
</head>
